(function(e){var t={};t.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());t.webkit=/webkit/.test(navigator.userAgent.toLowerCase());t.opera=/opera/.test(navigator.userAgent.toLowerCase());t.msie=/msie/.test(navigator.userAgent.toLowerCase());var n={max:10,partial:6,hintText:"Click to reveal completely"};var r=false;e.fn.spoilerAlert=function(i){i=e.extend(n,i||{});var s=i.max;var o=i.partial;var u=i.hintText;console.log(i.max);if(!r&&t.msie){alert("WARNING, this site contains spoilers!");r=true}return this.each(function(){var n=e(this);n.data("spoiler-state","shrouded");var r=null;var i=s;var a=function(){if(r){clearTimeout(r);r=null}};var f=function(e){i=e;if(t.msie){}else if(t.mozilla){var r=e>0?"url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='blur'><feGaussianBlur stdDeviation='"+e+"' /></filter></svg>#blur\")":"";n.css("filter",r)}else{var r=e>0?"blur("+e+"px)":"";n.css("filter",r);n.css("-webkit-filter",r);n.css("-moz-filter",r);n.css("-o-filter",r);n.css("-ms-filter",r)}};var l=function(e,t){a();if(i!=e){f(i+t);r=setTimeout(function(){l(e,t)},10)}};f(i);e(this).on("mouseover",function(e){n.css("cursor","pointer");n.attr("title",u);if(n.data("spoiler-state")=="shrouded")l(o,-1)});e(this).on("mouseout",function(e){if(n.data("spoiler-state")=="shrouded")l(s,1)});e(this).on("click",function(e){if(n.data("spoiler-state")=="shrouded"){n.data("spoiler-state","revealed");n.attr("title","");n.css("cursor","auto");l(0,-1)}else{n.data("spoiler-state","shrouded");n.attr("title",u);n.css("cursor","pointer");l(o,1)}})})}})(jQuery)
